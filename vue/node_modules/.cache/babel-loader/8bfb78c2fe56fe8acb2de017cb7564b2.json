{"ast":null,"code":"import { defineComponent, provide, ref, h, renderSlot } from 'vue';\nimport dayjs from 'dayjs';\nimport customParseFormat from 'dayjs/plugin/customParseFormat.js';\nimport advancedFormat from 'dayjs/plugin/advancedFormat.js';\nimport localeData from 'dayjs/plugin/localeData.js';\nimport weekOfYear from 'dayjs/plugin/weekOfYear.js';\nimport weekYear from 'dayjs/plugin/weekYear.js';\nimport dayOfYear from 'dayjs/plugin/dayOfYear.js';\nimport isSameOrAfter from 'dayjs/plugin/isSameOrAfter.js';\nimport isSameOrBefore from 'dayjs/plugin/isSameOrBefore.js';\nimport '../../time-picker/index.mjs';\nimport DatePickPanel from './date-picker-com/panel-date-pick.mjs';\nimport DateRangePickPanel from './date-picker-com/panel-date-range.mjs';\nimport MonthRangePickPanel from './date-picker-com/panel-month-range.mjs';\nimport { ROOT_PICKER_INJECTION_KEY } from './date-picker.type.mjs';\nimport { timePickerDefaultProps } from '../../time-picker/src/common/props.mjs';\nimport { DEFAULT_FORMATS_DATEPICKER, DEFAULT_FORMATS_DATE } from '../../time-picker/src/common/constant.mjs';\nimport CommonPicker from '../../time-picker/src/common/picker.mjs';\ndayjs.extend(localeData);\ndayjs.extend(advancedFormat);\ndayjs.extend(customParseFormat);\ndayjs.extend(weekOfYear);\ndayjs.extend(weekYear);\ndayjs.extend(dayOfYear);\ndayjs.extend(isSameOrAfter);\ndayjs.extend(isSameOrBefore);\n\nconst getPanel = function (type) {\n  if (type === \"daterange\" || type === \"datetimerange\") {\n    return DateRangePickPanel;\n  } else if (type === \"monthrange\") {\n    return MonthRangePickPanel;\n  }\n\n  return DatePickPanel;\n};\n\nvar DatePicker = defineComponent({\n  name: \"ElDatePicker\",\n  install: null,\n  props: { ...timePickerDefaultProps,\n    type: {\n      type: String,\n      default: \"date\"\n    }\n  },\n  emits: [\"update:modelValue\"],\n\n  setup(props, ctx) {\n    provide(\"ElPopperOptions\", props.popperOptions);\n    provide(ROOT_PICKER_INJECTION_KEY, {\n      ctx\n    });\n    const commonPicker = ref(null);\n    const refProps = { ...props,\n      focus: (focusStartInput = true) => {\n        var _a;\n\n        (_a = commonPicker.value) == null ? void 0 : _a.focus(focusStartInput);\n      }\n    };\n    ctx.expose(refProps);\n    return () => {\n      var _a;\n\n      const format = (_a = props.format) != null ? _a : DEFAULT_FORMATS_DATEPICKER[props.type] || DEFAULT_FORMATS_DATE;\n      return h(CommonPicker, { ...props,\n        format,\n        type: props.type,\n        ref: commonPicker,\n        \"onUpdate:modelValue\": value => ctx.emit(\"update:modelValue\", value)\n      }, {\n        default: scopedProps => h(getPanel(props.type), scopedProps),\n        \"range-separator\": () => renderSlot(ctx.slots, \"range-separator\")\n      });\n    };\n  }\n\n});\nexport { DatePicker as default };","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;AAoBAA,KAAK,CAACC,MAAN,CAAaC,UAAb;AACAF,KAAK,CAACC,MAAN,CAAaE,cAAb;AACAH,KAAK,CAACC,MAAN,CAAaG,iBAAb;AACAJ,KAAK,CAACC,MAAN,CAAaI,UAAb;AACAL,KAAK,CAACC,MAAN,CAAaK,QAAb;AACAN,KAAK,CAACC,MAAN,CAAaM,SAAb;AACAP,KAAK,CAACC,MAAN,CAAaO,aAAb;AACAR,KAAK,CAACC,MAAN,CAAaQ,cAAb;;AACA,MAAMC,QAAQ,GAAG,UAASC,IAAT,EAAe;AAC9B,MAAIA,IAAI,KAAK,WAAT,IAAwBA,IAAI,KAAK,eAArC,EAAsD;AACpD,WAAOC,kBAAP;AACD,GAFD,MAEO,IAAID,IAAI,KAAK,YAAb,EAA2B;AAChC,WAAOE,mBAAP;AACD;;AACD,SAAOC,aAAP;AACD,CAPD;;AAQA,iBAAeC,eAAe,CAAC;AAC7BC,MAAI,EAAE,cADuB;AAE7BC,SAAO,EAAE,IAFoB;AAG7BC,OAAK,EAAE,EACL,GAAGC,sBADE;AAELR,QAAI,EAAE;AACJA,UAAI,EAAES,MADF;AAEJC,aAAO,EAAE;AAFL;AAFD,GAHsB;AAU7BC,OAAK,EAAE,CAAC,mBAAD,CAVsB;;AAW7BC,OAAK,CAACL,KAAD,EAAQM,GAAR,EAAa;AAChBC,WAAO,CAAC,iBAAD,EAAoBP,KAAK,CAACQ,aAA1B,CAAP;AACAD,WAAO,CAACE,yBAAD,EAA4B;AACjCH;AADiC,KAA5B,CAAP;AAGA,UAAMI,YAAY,GAAGC,GAAG,CAAC,IAAD,CAAxB;AACA,UAAMC,QAAQ,GAAG,EACf,GAAGZ,KADY;AAEfa,WAAK,EAAE,CAACC,eAAe,GAAG,IAAnB,KAA4B;AACjC,YAAIC,EAAJ;;AACA,SAACA,EAAE,GAAGL,YAAY,CAACM,KAAnB,KAA6B,IAA7B,GAAoC,KAAK,CAAzC,GAA6CD,EAAE,CAACF,KAAH,CAASC,eAAT,CAA7C;AACD;AALc,KAAjB;AAOAR,OAAG,CAACW,MAAJ,CAAWL,QAAX;AACA,WAAO,MAAM;AACX,UAAIG,EAAJ;;AACA,YAAMG,MAAM,GAAG,CAACH,EAAE,GAAGf,KAAK,CAACkB,MAAZ,KAAuB,IAAvB,GAA8BH,EAA9B,GAAmCI,0BAA0B,CAACnB,KAAK,CAACP,IAAP,CAA1B,IAA0C2B,oBAA5F;AACA,aAAOC,CAAC,CAACC,YAAD,EAAe,EACrB,GAAGtB,KADkB;AAErBkB,cAFqB;AAGrBzB,YAAI,EAAEO,KAAK,CAACP,IAHS;AAIrBkB,WAAG,EAAED,YAJgB;AAKrB,+BAAwBM,KAAD,IAAWV,GAAG,CAACiB,IAAJ,CAAS,mBAAT,EAA8BP,KAA9B;AALb,OAAf,EAML;AACDb,eAAO,EAAGqB,WAAD,IAAiBH,CAAC,CAAC7B,QAAQ,CAACQ,KAAK,CAACP,IAAP,CAAT,EAAuB+B,WAAvB,CAD1B;AAED,2BAAmB,MAAMC,UAAU,CAACnB,GAAG,CAACoB,KAAL,EAAY,iBAAZ;AAFlC,OANK,CAAR;AAUD,KAbD;AAcD;;AAvC4B,CAAD,CAA9B","names":["dayjs","extend","localeData","advancedFormat","customParseFormat","weekOfYear","weekYear","dayOfYear","isSameOrAfter","isSameOrBefore","getPanel","type","DateRangePickPanel","MonthRangePickPanel","DatePickPanel","defineComponent","name","install","props","timePickerDefaultProps","String","default","emits","setup","ctx","provide","popperOptions","ROOT_PICKER_INJECTION_KEY","commonPicker","ref","refProps","focus","focusStartInput","_a","value","expose","format","DEFAULT_FORMATS_DATEPICKER","DEFAULT_FORMATS_DATE","h","CommonPicker","emit","scopedProps","renderSlot","slots"],"sources":["../../../../../../packages/components/date-picker/src/date-picker.ts"],"sourcesContent":["import { defineComponent, h, provide, ref, renderSlot } from 'vue'\nimport dayjs from 'dayjs'\nimport customParseFormat from 'dayjs/plugin/customParseFormat.js'\nimport advancedFormat from 'dayjs/plugin/advancedFormat.js'\nimport localeData from 'dayjs/plugin/localeData.js'\nimport weekOfYear from 'dayjs/plugin/weekOfYear.js'\nimport weekYear from 'dayjs/plugin/weekYear.js'\nimport dayOfYear from 'dayjs/plugin/dayOfYear.js'\nimport isSameOrAfter from 'dayjs/plugin/isSameOrAfter.js'\nimport isSameOrBefore from 'dayjs/plugin/isSameOrBefore.js'\nimport {\n  CommonPicker,\n  DEFAULT_FORMATS_DATE,\n  DEFAULT_FORMATS_DATEPICKER,\n  timePickerDefaultProps,\n} from '@element-plus/components/time-picker'\nimport DatePickPanel from './date-picker-com/panel-date-pick.vue'\nimport DateRangePickPanel from './date-picker-com/panel-date-range.vue'\nimport MonthRangePickPanel from './date-picker-com/panel-month-range.vue'\nimport { ROOT_PICKER_INJECTION_KEY } from './date-picker.type'\nimport type { PropType } from 'vue'\nimport type { IDatePickerType } from './date-picker.type'\n\ndayjs.extend(localeData)\ndayjs.extend(advancedFormat)\ndayjs.extend(customParseFormat)\ndayjs.extend(weekOfYear)\ndayjs.extend(weekYear)\ndayjs.extend(dayOfYear)\ndayjs.extend(isSameOrAfter)\ndayjs.extend(isSameOrBefore)\n\nconst getPanel = function (type: IDatePickerType) {\n  if (type === 'daterange' || type === 'datetimerange') {\n    return DateRangePickPanel\n  } else if (type === 'monthrange') {\n    return MonthRangePickPanel\n  }\n  return DatePickPanel\n}\n\nexport default defineComponent({\n  name: 'ElDatePicker',\n  install: null,\n  props: {\n    ...timePickerDefaultProps,\n    type: {\n      type: String as PropType<IDatePickerType>,\n      default: 'date',\n    },\n  },\n  emits: ['update:modelValue'],\n  setup(props, ctx) {\n    provide('ElPopperOptions', props.popperOptions)\n    provide(ROOT_PICKER_INJECTION_KEY, {\n      ctx,\n    })\n    const commonPicker = ref(null)\n    const refProps = {\n      ...props,\n      focus: (focusStartInput = true) => {\n        commonPicker.value?.focus(focusStartInput)\n      },\n    }\n    ctx.expose(refProps)\n    return () => {\n      // since props always have all defined keys on it, {format, ...props} will always overwrite format\n      // pick props.format or provide default value here before spreading\n      const format =\n        props.format ??\n        (DEFAULT_FORMATS_DATEPICKER[props.type] || DEFAULT_FORMATS_DATE)\n      return h(\n        CommonPicker,\n        {\n          ...props,\n          format,\n          type: props.type,\n          ref: commonPicker,\n          'onUpdate:modelValue': (value) =>\n            ctx.emit('update:modelValue', value),\n        },\n        {\n          default: (scopedProps) => h(getPanel(props.type), scopedProps),\n          'range-separator': () => renderSlot(ctx.slots, 'range-separator'),\n        }\n      )\n    }\n  },\n})\n"]},"metadata":{},"sourceType":"module"}