{"ast":null,"code":"import { defineComponent, ref, provide, computed, openBlock, createBlock, Teleport, createVNode, Transition, unref, withCtx, withDirectives, createElementVNode, normalizeClass, normalizeStyle, createSlots, renderSlot, createCommentVNode, vShow } from 'vue';\nimport { ElOverlay } from '../../overlay/index.mjs';\nimport '../../../hooks/index.mjs';\nimport '../../../tokens/index.mjs';\nimport ElDialogContent from './dialog-content2.mjs';\nimport { dialogProps, dialogEmits } from './dialog.mjs';\nimport { useDialog } from './use-dialog.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { dialogInjectionKey } from '../../../tokens/dialog.mjs';\nimport { useSameTarget } from '../../../hooks/use-same-target/index.mjs';\nimport { useDraggable } from '../../../hooks/use-draggable/index.mjs';\nconst __default__ = {\n  name: \"ElDialog\"\n};\n\nconst _sfc_main = /* @__PURE__ */defineComponent({ ...__default__,\n  props: dialogProps,\n  emits: dialogEmits,\n\n  setup(__props, {\n    expose\n  }) {\n    const props = __props;\n    const ns = useNamespace(\"dialog\");\n    const dialogRef = ref();\n    const headerRef = ref();\n    const {\n      visible,\n      style,\n      rendered,\n      zIndex,\n      afterEnter,\n      afterLeave,\n      beforeLeave,\n      handleClose,\n      onModalClick\n    } = useDialog(props, dialogRef);\n    provide(dialogInjectionKey, {\n      dialogRef,\n      headerRef,\n      ns,\n      rendered,\n      style\n    });\n    const overlayEvent = useSameTarget(onModalClick);\n    const draggable = computed(() => props.draggable && !props.fullscreen);\n    useDraggable(dialogRef, headerRef, draggable);\n    expose({\n      visible\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(Teleport, {\n        to: \"body\",\n        disabled: !_ctx.appendToBody\n      }, [createVNode(Transition, {\n        name: \"dialog-fade\",\n        onAfterEnter: unref(afterEnter),\n        onAfterLeave: unref(afterLeave),\n        onBeforeLeave: unref(beforeLeave)\n      }, {\n        default: withCtx(() => [withDirectives(createVNode(unref(ElOverlay), {\n          \"custom-mask-event\": \"\",\n          mask: _ctx.modal,\n          \"overlay-class\": _ctx.modalClass,\n          \"z-index\": unref(zIndex)\n        }, {\n          default: withCtx(() => [createElementVNode(\"div\", {\n            class: normalizeClass(`${unref(ns).namespace.value}-overlay-dialog`),\n            onClick: _cache[0] || (_cache[0] = (...args) => unref(overlayEvent).onClick && unref(overlayEvent).onClick(...args)),\n            onMousedown: _cache[1] || (_cache[1] = (...args) => unref(overlayEvent).onMousedown && unref(overlayEvent).onMousedown(...args)),\n            onMouseup: _cache[2] || (_cache[2] = (...args) => unref(overlayEvent).onMouseup && unref(overlayEvent).onMouseup(...args))\n          }, [unref(rendered) ? (openBlock(), createBlock(ElDialogContent, {\n            key: 0,\n            \"custom-class\": _ctx.customClass,\n            center: _ctx.center,\n            \"close-icon\": _ctx.closeIcon,\n            draggable: unref(draggable),\n            fullscreen: _ctx.fullscreen,\n            \"show-close\": _ctx.showClose,\n            style: normalizeStyle(unref(style)),\n            title: _ctx.title,\n            onClose: unref(handleClose)\n          }, createSlots({\n            title: withCtx(() => [renderSlot(_ctx.$slots, \"title\")]),\n            default: withCtx(() => [renderSlot(_ctx.$slots, \"default\")]),\n            _: 2\n          }, [_ctx.$slots.footer ? {\n            name: \"footer\",\n            fn: withCtx(() => [renderSlot(_ctx.$slots, \"footer\")])\n          } : void 0]), 1032, [\"custom-class\", \"center\", \"close-icon\", \"draggable\", \"fullscreen\", \"show-close\", \"style\", \"title\", \"onClose\"])) : createCommentVNode(\"v-if\", true)], 34)]),\n          _: 3\n        }, 8, [\"mask\", \"overlay-class\", \"z-index\"]), [[vShow, unref(visible)]])]),\n        _: 3\n      }, 8, [\"onAfterEnter\", \"onAfterLeave\", \"onBeforeLeave\"])], 8, [\"disabled\"]);\n    };\n  }\n\n});\n\nvar Dialog = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue\"]]);\n\nexport { Dialog as default };","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;AAEA;AACAA,aADA;AAEAC,WAFA;AAGAC,cAHA;AAIAC,YAJA;AAKAC,gBALA;AAMAC,gBANA;AAOAC,iBAPA;AAQAC,iBARA;AASAC;AATA,QAUAC,2BAVA;AAYAC;AACAC,eADA;AAEAC,eAFA;AAGAC,QAHA;AAIAX,cAJA;AAKAD;AALA;AAQA;AAEA;AAEAa;AAEAC;AAEAf;AAFA","names":["visible","style","rendered","zIndex","afterEnter","afterLeave","beforeLeave","handleClose","onModalClick","useDialog","provide","dialogRef","headerRef","ns","useDraggable","expose"],"sources":["../../../../../../packages/components/dialog/src/dialog.vue"],"sourcesContent":["<template>\n  <teleport to=\"body\" :disabled=\"!appendToBody\">\n    <transition\n      name=\"dialog-fade\"\n      @after-enter=\"afterEnter\"\n      @after-leave=\"afterLeave\"\n      @before-leave=\"beforeLeave\"\n    >\n      <el-overlay\n        v-show=\"visible\"\n        custom-mask-event\n        :mask=\"modal\"\n        :overlay-class=\"modalClass\"\n        :z-index=\"zIndex\"\n      >\n        <div\n          :class=\"`${ns.namespace.value}-overlay-dialog`\"\n          @click=\"overlayEvent.onClick\"\n          @mousedown=\"overlayEvent.onMousedown\"\n          @mouseup=\"overlayEvent.onMouseup\"\n        >\n          <el-dialog-content\n            v-if=\"rendered\"\n            :custom-class=\"customClass\"\n            :center=\"center\"\n            :close-icon=\"closeIcon\"\n            :draggable=\"draggable\"\n            :fullscreen=\"fullscreen\"\n            :show-close=\"showClose\"\n            :style=\"style\"\n            :title=\"title\"\n            @close=\"handleClose\"\n          >\n            <template #title>\n              <slot name=\"title\" />\n            </template>\n            <slot />\n            <template v-if=\"$slots.footer\" #footer>\n              <slot name=\"footer\" />\n            </template>\n          </el-dialog-content>\n        </div>\n      </el-overlay>\n    </transition>\n  </teleport>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, provide, ref } from 'vue'\nimport { ElOverlay } from '@element-plus/components/overlay'\nimport { useDraggable, useNamespace, useSameTarget } from '@element-plus/hooks'\nimport { dialogInjectionKey } from '@element-plus/tokens'\nimport ElDialogContent from './dialog-content.vue'\nimport { dialogEmits, dialogProps } from './dialog'\nimport { useDialog } from './use-dialog'\n\ndefineOptions({\n  name: 'ElDialog',\n})\n\nconst props = defineProps(dialogProps)\ndefineEmits(dialogEmits)\n\nconst ns = useNamespace('dialog')\nconst dialogRef = ref<HTMLElement>()\nconst headerRef = ref<HTMLElement>()\n\nconst {\n  visible,\n  style,\n  rendered,\n  zIndex,\n  afterEnter,\n  afterLeave,\n  beforeLeave,\n  handleClose,\n  onModalClick,\n} = useDialog(props, dialogRef)\n\nprovide(dialogInjectionKey, {\n  dialogRef,\n  headerRef,\n  ns,\n  rendered,\n  style,\n})\n\nconst overlayEvent = useSameTarget(onModalClick)\n\nconst draggable = computed(() => props.draggable && !props.fullscreen)\n\nuseDraggable(dialogRef, headerRef, draggable)\n\ndefineExpose({\n  /** @description whether the dialog is visible */\n  visible,\n})\n</script>\n"]},"metadata":{},"sourceType":"module"}